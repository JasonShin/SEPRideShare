<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    
    <h:head>
        <link rel="stylesheet" type="text/css" href="style.css"/>
        <link href="css\hover.css" rel="stylesheet" media="all"></link>
        <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css"></link>
        <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    </h:head>
    
    <header class="header-bar">
        <h1 id="left-content"><a href="/RideShare/faces/index.xhtml">RideShare</a></h1>
        <div id="right-content">
            <h:form rendered="#{empty request.remoteUser}">
                <div id="SignupWrapper">
                    <p:commandButton id="signupButton" value="Signup" type="button"/>
                </div>
                <p:overlayPanel id="loginPanel" for="signupButton" hideEffect="fade">

                    <div id="container">

                        <div>username or email: </div>
                        <div>
                            <p:inputText id="newUsername" value="#{accountController.account.username}">
                                <f:validator validatorId="custom.usernameValidator" />
                            </p:inputText>

                        </div>
                        <div>Password: </div>
                        <div>
                            <p:password  id="newPassword" value="#{accountController.account.password}"
                                         feedback="true">
                                <f:validator validatorId="custom.passwordValidator" />
                            </p:password>

                        </div>


                        <div>Phone: </div>
                        <div>
                            <p:inputText id="phone" value="#{accountController.account.phone}" />
                        </div>

                        <div>Email: </div>
                        <div>
                            <p:inputText id="email" value="#{accountController.account.email}" />
                        </div>

                        <!-- Display any error messages associated for this input -->
                        <p:message for="newUsername" />
                        <p:message for="newPassword" />

                        <div style="padding-top: 10px;"> 

                            <p:commandButton value="Signup" id="signupSubmit" action="#{accountController.signup()}" ajax="false" />
                        </div> 

                    </div>

                </p:overlayPanel>
            </h:form>


            <h:form rendered="#{empty request.remoteUser}">
                <div id="LoginWrapper">
                    <p:commandButton id="loginButton" value="Login" type="button"/> 
                </div>
                <p:overlayPanel id="loginPanel" for="loginButton" hideEffect="fade">

                    <div id="container">

                        <div>username or email: </div>
                        <div>
                            <p:inputText id="username" value="#{accountController.account.username}" />

                        </div>
                        <div>Password: </div>
                        <div id="LoginPasswordWrapper">
                            <p:password id="password" value="#{accountController.account.password}" />
                            <script>
                                $(document).ready(function(){
                                    $("#LoginPasswordWrapper").find("input").text("");
                                });
                            </script>
                        </div>
                        <div style="padding-top: 10px;"> 
                            <p:commandButton value="Login" id="loginSubmit" action="#{accountController.login()}" ajax="false" />
                        </div> 

                    </div>

                </p:overlayPanel>
            </h:form>

            <h:form rendered="#{not empty request.remoteUser}">
                <p:commandButton value="Logout" id="logout" action="#{accountController.logout()}" ajax="false" />

            </h:form>
        </div>
    </header>

    <nav>
        <ul>

            <li> <a rel="glow" class="button glow" href="index.xhtml">Home</a></li>
            <li> <a rel="glow" class="button glow" href="MyRides.xhtml"> My Rides </a></li>
            <li> <a rel="glow" class="button glow" href="CreateRide.xhtml"> Create Ride</a></li>
            <li> <a rel="glow" class="button glow" href="AboutUs.xhtml">About Us </a></li>

        </ul>
    </nav>  
</html>
